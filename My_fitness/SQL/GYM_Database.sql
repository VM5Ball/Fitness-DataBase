DROP TABLE GYM_CUSTOMER CASCADE CONSTRAINTS;
DROP TABLE GYM_FACILITIES CASCADE CONSTRAINTS;
DROP TABLE GYM_FITNESS_BRANCH CASCADE CONSTRAINTS;
DROP TABLE GYM_BATCHES CASCADE CONSTRAINTS;
DROP TABLE GYM_CLERK CASCADE CONSTRAINTS;
DROP TABLE GYM_TRAINER CASCADE CONSTRAINTS;
DROP TABLE GYM_MANAGERS CASCADE CONSTRAINTS;
DROP TABLE GYM_CUSTOMER_REPORT CASCADE CONSTRAINTS;
DROP TABLE GYM_EQUIPMENT CASCADE CONSTRAINTS;
DROP TABLE GYM_EMPLOYEE CASCADE CONSTRAINTS;
DROP TABLE GYM_TRAINER_BATCH CASCADE CONSTRAINTS;
DROP TABLE GYM_BRANCH_FACILITIES CASCADE CONSTRAINTS;




CREATE TABLE GYM_CUSTOMER
(
	C_ID NUMBER NOT NULL,
	SSN NUMBER(11) NOT NULL,
	FN VARCHAR2(25) NOT NULL,
	LN VARCHAR2(25) NOT NULL,
	ADDRESS VARCHAR2(40),
	SEX VARCHAR2(20) NOT NULL, 
	PHONE NUMBER(11),
	BATCH_ID NUMBER,
	FACILITY_ID NUMBER,
	TRAINER_SSN NUMBER(11),
	PRIMARY KEY(C_ID)
);

CREATE TABLE GYM_FACILITIES
(
	FACILITY_ID NUMBER NOT NULL,
	TITLE VARCHAR2(100),
	TYPE VARCHAR2(100),
	AMOUNT NUMBER,
	PRIMARY KEY(FACILITY_ID)
);

CREATE TABLE GYM_FITNESS_BRANCH 
(
	B_ID NUMBER NOT NULL,
	ADDRESS VARCHAR2(40) NOT NULL,
	PHONE NUMBER(11) NOT NULL,
	MANAGER_SSN NUMBER(11),
	PRIMARY KEY(B_ID) 
);

CREATE TABLE GYM_BATCHES 
(
	BATCH_ID NUMBER NOT NULL,
	BATCH_TYPE VARCHAR2(100) NOT NULL,
	START_TIME VARCHAR2(20) NOT NULL,
	END_TIME VARCHAR2(20),
	BRANCH_ID NUMBER NOT NULL,
	PRIMARY KEY(BATCH_ID) 
);


CREATE TABLE GYM_CLERK
(	
	CLERK_SSN NUMBER(11) NOT NULL, 
	WEEKLY_SALARY NUMBER NOT NULL,
	PRIMARY KEY (CLERK_SSN)
);

CREATE TABLE GYM_TRAINER
(	
	TRAINER_SSN NUMBER(11) NOT NULL, 
	HOURLY_SALARY NUMBER NOT NULL,
	PRIMARY KEY (TRAINER_SSN)
);

CREATE TABLE GYM_MANAGERS
(	
	MANAGER_SSN NUMBER(11) NOT NULL, 
	MONTHLY_SALARY NUMBER NOT NULL,
	PRIMARY KEY (MANAGER_SSN)
);


CREATE TABLE GYM_CUSTOMER_REPORT
(	
	R_ID NUMBER NOT NULL, 
	AGE NUMBER(3) NOT NULL,
	WEIGHT NUMBER(3) NOT NULL,
	HEIGHT NUMBER(3) NOT NULL,
	FAT_PERCENTAGE NUMBER(2) NOT NULL,
	MUSCLES NUMBER(2) NOT NULL,
	C_ID NUMBER NOT NULL,
	CLERK_SSN NUMBER(11),
	PRIMARY KEY (R_ID)
);

CREATE TABLE GYM_EQUIPMENT
(	
	E_ID NUMBER NOT NULL, 
	E_TYPE VARCHAR2(100) NOT NULL,
	E_CONDITION VARCHAR2(50),
	MANUFACTURER VARCHAR2(200),
	TITLE VARCHAR2(100) NOT NULL,
	BRANCH_ID NUMBER NOT NULL,
	CLERK_SSN NUMBER(11),
	PRIMARY KEY (E_ID)
);

CREATE TABLE GYM_EMPLOYEE
(	
	SSN NUMBER(11) NOT NULL, 
	NAME VARCHAR2(25) NOT NULL,
	ADDRESS VARCHAR2(40) NOT NULL,
	PHONE NUMBER(11),
	BRANCH_ID NUMBER,
	PRIMARY KEY (SSN)
);


CREATE TABLE GYM_TRAINER_BATCH
(	
	BATCH_ID NUMBER NOT NULL, 
	TRAINER_SSN NUMBER(11) NOT NULL,
	PRIMARY KEY (BATCH_ID, TRAINER_SSN)
);

CREATE TABLE GYM_BRANCH_FACILITIES
(	
	BRANCH_ID NUMBER NOT NULL, 
	FACILITY_ID NUMBER NOT NULL,
	PRIMARY KEY (BRANCH_ID, FACILITY_ID)
);




insert into GYM_FACILITIES values(01, 'Cardio','Indoor', 25);
insert into GYM_FACILITIES values(02, 'Steam','Indoor', 30);
insert into GYM_FACILITIES values(03, 'SONA','Indoor', 10);
insert into GYM_FACILITIES values(04, 'Cross-Fit','Indoor', 22);
insert into GYM_FACILITIES values(05, 'Cycling','Outdoor', 45);


insert into GYM_CUSTOMER values(01, 11134534511, 'Vladimir', 'Markovich', 'Trofimova str. 5', 'Male', 79259239425, 01, 01, 79453596199);
insert into GYM_CUSTOMER values(02, 37612345678, 'Artem', 'Vyrodov', 'Trofimova str. 5', 'Male', 76517226399, 02, 02, 79453596199);
insert into GYM_CUSTOMER values(03, 32656345179, 'Nastya', 'Novikova', 'Trofimova str. 5', 'Female', 79978175903, 03, 03, 79453596199);
insert into GYM_CUSTOMER values(04, 81656325391, 'Sasha', 'Glushkov', 'Trofimova str. 5', 'Male', 79269189818, 04, 04, 93646764993);
insert into GYM_CUSTOMER values(05, 70652315478, 'Olya', 'Goncharova', 'Trofimova str. 5', 'Female', 79804385405, 05, 05, 42568862949);


--last col - manager ssn
insert into GYM_FITNESS_BRANCH values(01, 'Tverskaya str. 40', 74959528788, 35546745356);
insert into GYM_FITNESS_BRANCH values(02, 'Trofimova str. 33', 74950490299, 35546745356);
insert into GYM_FITNESS_BRANCH values(03, 'Lobanova str. 12', 74952945260, 35546745356);
insert into GYM_FITNESS_BRANCH values(04, 'Vernadskogo avenue 57', 74955479308, 31465168107);
insert into GYM_FITNESS_BRANCH values(05, 'Arbat str. 30', 74953563345, 31465168107);


insert into GYM_BATCHES values(01,'Morning', '06:00', '10:00', 01);
insert into GYM_BATCHES values(02,'Morning', '06:00', '10:00', 01);
insert into GYM_BATCHES values(03,'Morning', '08:00', '11:00', 01);
insert into GYM_BATCHES values(04,'Morning', '08:00', '10:00', 04);
insert into GYM_BATCHES values(05,'Evening', '18:00', '21:00', 05);


--clerks
insert into GYM_EMPLOYEE values(64076750409, 'Alexey Kotov', 'Trofimova str. 32', 79002360590, 01);
insert into GYM_EMPLOYEE values(15295684504, 'Anton Evdokimov', 'Luzhskaya str. 14', 79712197512, 01);
--trainers
insert into GYM_EMPLOYEE values(79453596199, 'Aleksey Shirokov', 'Kaluzhskaya str. 59', 79509852944, 01);
insert into GYM_EMPLOYEE values(93646764993, 'Nikita Malofeev', 'Bratskaya str. 1', 79327063055, 01);
insert into GYM_EMPLOYEE values(42568862949, 'Egor Vanin', 'Luchshaya str. 18', 79999087342, 01);
--managers
insert into GYM_EMPLOYEE values(35546745356,'Oleg Lomov', 'Novaya str. 27', 79639578881, 04);
insert into GYM_EMPLOYEE values(31465168107,'Artem Nashev', 'Staraya str. 11', 79302882612, 05);


--clerk ssn
insert into GYM_EQUIPMENT values(01,'Cardio', 'Good', 'Sportmaster', 'Treadmill', 01, 64076750409);
insert into GYM_EQUIPMENT values(02,'Cardio', 'Excellent', 'Decathlon', 'Scales', 01, 64076750409);
insert into GYM_EQUIPMENT values(03,'Cardio', 'In Repair', 'InterSport', 'Treadmill', 01, 64076750409);
insert into GYM_EQUIPMENT values(04,'Cycling', 'Good', 'Sportmaster', 'Bike', 01, 15295684504);
insert into GYM_EQUIPMENT values(05,'Dumbels', 'Good', 'Decathlon', 'Weight', 01, 15295684504);


insert into GYM_CLERK values(64076750409, 10000);
insert into GYM_CLERK values(15295684504, 12000);


insert into GYM_MANAGERS values(35546745356, 200000);
insert into GYM_MANAGERS values(31465168107, 250000);


insert into GYM_TRAINER values(79453596199, 1220);
insert into GYM_TRAINER values(93646764993, 2500);
insert into GYM_TRAINER values(42568862949, 800);


insert into GYM_TRAINER_BATCH values(01, 42568862949);
insert into GYM_TRAINER_BATCH values(02, 42568862949);
insert into GYM_TRAINER_BATCH values(03, 79453596199);
insert into GYM_TRAINER_BATCH values(04, 93646764993);
insert into GYM_TRAINER_BATCH values(05, 79453596199);


insert into GYM_CUSTOMER_REPORT values(01, 19, 78, 188, 15, 12, 01, 64076750409);
insert into GYM_CUSTOMER_REPORT values(02, 21, 88, 176, 17, 10, 01, 64076750409);
insert into GYM_CUSTOMER_REPORT values(03, 23, 73, 171, 13, 11, 01, 15295684504);
insert into GYM_CUSTOMER_REPORT values(04, 25, 78, 192, 11, 9, 01, 15295684504);
insert into GYM_CUSTOMER_REPORT values(05, 24, 78, 177, 19, 11, 01, 64076750409);


insert into GYM_BRANCH_FACILITIES values(01, 01);
insert into GYM_BRANCH_FACILITIES values(02, 02);
insert into GYM_BRANCH_FACILITIES values(03, 03);
insert into GYM_BRANCH_FACILITIES values(04, 04);
insert into GYM_BRANCH_FACILITIES values(05, 05);




--Below Alter tables are given

ALTER TABLE GYM_CUSTOMER ADD CONSTRAINT GYM_CUSTOMER_FK1 FOREIGN KEY(BATCH_ID) REFERENCES GYM_BATCHES (BATCH_ID) ON DELETE SET NULL;

ALTER TABLE GYM_CUSTOMER ADD CONSTRAINT GYM_CUSTOMER_FK2 FOREIGN KEY(TRAINER_SSN) REFERENCES GYM_TRAINER (TRAINER_SSN) ON DELETE SET NULL;

ALTER TABLE GYM_CUSTOMER ADD CONSTRAINT GYM_CUSTOMER_FK3 FOREIGN KEY(FACILITY_ID) REFERENCES GYM_FACILITIES (FACILITY_ID) ON DELETE SET NULL;

ALTER TABLE GYM_FITNESS_BRANCH ADD CONSTRAINT GYM_FITNESS_BRANCH_FK FOREIGN KEY(MANAGER_SSN) REFERENCES GYM_MANAGERS (MANAGER_SSN) ON DELETE SET NULL;

ALTER TABLE GYM_BATCHES ADD CONSTRAINT GYM_BATCHES_FK FOREIGN KEY(BRANCH_ID) REFERENCES GYM_FITNESS_BRANCH (B_ID) ON DELETE CASCADE;

ALTER TABLE GYM_EMPLOYEE ADD CONSTRAINT GYM_EMPLOYEE_FK FOREIGN KEY(BRANCH_ID) REFERENCES GYM_FITNESS_BRANCH (B_ID) ON DELETE SET NULL;

ALTER TABLE GYM_EQUIPMENT ADD CONSTRAINT GYM_EQUIPMENT_FK1 FOREIGN KEY(BRANCH_ID) REFERENCES GYM_FITNESS_BRANCH (B_ID) ;

ALTER TABLE GYM_EQUIPMENT ADD CONSTRAINT GYM_EQUIPMENT_FK2 FOREIGN KEY(CLERK_SSN) REFERENCES GYM_CLERK (CLERK_SSN) ON DELETE SET NULL;

ALTER TABLE GYM_CUSTOMER_REPORT ADD CONSTRAINT GYM_CUSTOMER_REPORT_FK1 FOREIGN KEY(C_ID) REFERENCES GYM_CUSTOMER (C_ID) ON DELETE CASCADE;

ALTER TABLE GYM_CUSTOMER_REPORT ADD CONSTRAINT GYM_CUSTOMER_REPORT_FK2 FOREIGN KEY(CLERK_SSN) REFERENCES GYM_CLERK (CLERK_SSN) ON DELETE SET NULL;

ALTER TABLE GYM_BRANCH_FACILITIES ADD CONSTRAINT GYM_BRANCH_FACILITIES_FK1 FOREIGN KEY(FACILITY_ID) REFERENCES GYM_FACILITIES (FACILITY_ID) ON DELETE CASCADE;

ALTER TABLE GYM_BRANCH_FACILITIES ADD CONSTRAINT GYM_BRANCH_FACILITIES_FK2 FOREIGN KEY(BRANCH_ID) REFERENCES GYM_FITNESS_BRANCH (B_ID) ON DELETE CASCADE;

ALTER TABLE GYM_MANAGERS ADD CONSTRAINT GYM_MANAGERS_FK FOREIGN KEY(MANAGER_SSN) REFERENCES GYM_EMPLOYEE (SSN) ON DELETE CASCADE;

ALTER TABLE GYM_CLERK ADD CONSTRAINT GYM_CLERK_FK FOREIGN KEY(CLERK_SSN) REFERENCES GYM_EMPLOYEE (SSN) ON DELETE CASCADE;

ALTER TABLE GYM_TRAINER ADD CONSTRAINT GYM_TRAINER_FK FOREIGN KEY(TRAINER_SSN) REFERENCES GYM_EMPLOYEE (SSN) ON DELETE CASCADE;

ALTER TABLE GYM_TRAINER_BATCH ADD CONSTRAINT GYM_TRAINER_BATCH_FK1 FOREIGN KEY(BATCH_ID) REFERENCES GYM_BATCHES (BATCH_ID) ON DELETE CASCADE;

ALTER TABLE GYM_TRAINER_BATCH ADD CONSTRAINT GYM_TRAINER_BATCH_FK2 FOREIGN KEY(TRAINER_SSN) REFERENCES GYM_TRAINER (TRAINER_SSN) ON DELETE CASCADE;
